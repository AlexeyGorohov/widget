var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e,n){t.$$.on_destroy.push(function(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e,n){t.classList[n?"add":"remove"](e)}let g;function $(t){g=t}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&o.firstChild?o.insertBefore(s,o.firstChild):o.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}('@import "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css";\n\nmain {\n  background: #eee;\n}\n\n.seating {\n  background-color: var(--yellow);\n}\n\n.seating__col {\n  flex: 1 0 calc(100% / 10);\n  max-width: calc(100% / 10);\n}\n\n.seating__item {\n  background-color: var(--yellow);\n}\n\n.seating__item.disabled {\n  background-color: var(--red);\n}\n');const b=[],y=[],_=[],x=[],v=Promise.resolve();let k=!1;function w(t){_.push(t)}function C(){const t=new Set;do{for(;b.length;){const t=b.shift();$(t),E(t.$$)}for(;y.length;)y.pop()();for(let e=0;e<_.length;e+=1){const n=_[e];t.has(n)||(n(),t.add(n))}_.length=0}while(b.length);for(;x.length;)x.pop()();k=!1}function E(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(w))}const S=new Set;let A;function M(t,e){t&&t.i&&(S.delete(t),t.i(e))}function N(t,e){t.d(1),e.delete(t.key)}function O(t,n,r){const{fragment:c,on_mount:a,on_destroy:i,after_update:u}=t.$$;c.m(n,r),w(()=>{const n=a.map(e).filter(s);i?i.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(w)}function T(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function j(t,e){t.$$.dirty||(b.push(t),k||(k=!0,v.then(C)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function B(e,s,r,c,a,i){const u=g;$(e);const l=s.props||{},d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var p;d.ctx=r?r(e,l,(t,n,o=n)=>(d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),f&&j(e,t)),n)):l,d.update(),f=!0,o(d.before_update),d.fragment=c(d.ctx),s.target&&(s.hydrate?d.fragment.l((p=s.target,Array.from(p.childNodes))):d.fragment.c(),s.intro&&M(e.$$.fragment),O(e,s.target,s.anchor),C()),$(u)}class L{$destroy(){T(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const q=[];function P(e,n=t){let o;const s=[];function c(t){if(r(e,t)&&(e=t,o)){const t=!q.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),q.push(n,e)}if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(r,a=t){const i=[r,a];return s.push(i),1===s.length&&(o=n(c)||t),r(e),()=>{const t=s.indexOf(i);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}const z=P(0),D=[...Array(100).keys()].map(t=>({id:t,price:120,disabled:!1}));const F=function(){const{subscribe:t,update:e}=P(D);return{subscribe:t,toggleSeat:t=>{e(e=>(e[t].disabled=!e[t].disabled,e))}}}();function G(t,e,n){const o=Object.create(t);return o.seat=e[n],o}function H(t,e){var n,o,s,r,c,g=e.seat.id+"";function $(...t){return e.click_handler(e,...t)}return{key:t,first:null,c(){var t,a,i,u;n=l("div"),o=l("div"),s=d(g),r=f(),p(o,"class","seating__item p-2 w-100 text-center border border-succes rounded\n          cursor-pointer"),m(o,"disabled",e.seat.disabled),p(n,"class","seating__col p-1 d-flex"),a="click",i=$,(t=o).addEventListener(a,i,u),c=(()=>t.removeEventListener(a,i,u)),this.first=n},m(t,e){i(t,n,e),a(n,o),a(o,s),a(n,r)},p(t,n){e=n,t.$seating&&g!==(g=e.seat.id+"")&&h(s,g),t.$seating&&m(o,"disabled",e.seat.disabled)},d(t){t&&u(n),c()}}}function I(e){var n,o,s,r,c,m,g,$,b=[],y=new Map;let _=e.$seating;const x=t=>t.seat.id;for(let t=0;t<_.length;t+=1){let n=G(e,_,t),o=x(n);y.set(o,b[t]=H(o,n))}return{c(){n=l("div"),o=d("Цена: "),s=d(e.$sum),r=f(),(c=l("div")).textContent="Выбранные места:",m=f(),g=l("section"),$=l("div");for(let t=0;t<b.length;t+=1)b[t].c();p(n,"class","mb-2"),p(c,"class","mb-3"),p($,"class","d-flex flex-wrap"),p(g,"class","section section_seating")},m(t,e){i(t,n,e),a(n,o),a(n,s),i(t,r,e),i(t,c,e),i(t,m,e),i(t,g,e),a(g,$);for(let t=0;t<b.length;t+=1)b[t].m($,null)},p(t,e){t.$sum&&h(s,e.$sum);const n=e.$seating;b=function(t,e,n,o,s,r,c,a,i,u,l,d){let f=t.length,p=r.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,b=new Map;for(h=p;h--;){const t=d(s,r,h),a=n(t);let i=c.get(a);i?o&&i.p(e,t):(i=u(a,t)).c(),$.set(a,g[h]=i),a in m&&b.set(a,Math.abs(h-m[a]))}const y=new Set,_=new Set;function x(t){M(t,1),t.m(a,l),c.set(t.key,t),l=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],o=e.key,s=n.key;e===n?(l=e.first,f--,p--):$.has(s)?!c.has(o)||y.has(o)?x(e):_.has(s)?f--:b.get(o)>b.get(s)?(_.add(o),x(e)):(y.add(s),f--):(i(n,c),f--)}for(;f--;){const e=t[f];$.has(e.key)||i(e,c)}for(;p;)x(g[p-1]);return g}(b,t,x,1,e,n,y,$,N,H,null,G)},i:t,o:t,d(t){t&&(u(n),u(r),u(c),u(m),u(g));for(let t=0;t<b.length;t+=1)b[t].d()}}}function J(t,e,n){let o,s;c(t,z,t=>{n("$sum",o=t)}),c(t,F,t=>{n("$seating",s=t)});return{$sum:o,$seating:s,click_handler:({seat:t},e)=>(function(t){const{id:e,disabled:n,price:o}=t;F.toggleSeat(e),z.update(t=>t+o)})(t)}}class K extends L{constructor(t){super(),B(this,t,J,I,r,[])}}function Q(e){var n,o,s,r,c=new K({});return{c(){n=l("main"),(o=l("h1")).textContent="Выберите место",s=f(),c.$$.fragment.c(),p(n,"class","p-2")},m(t,e){i(t,n,e),a(n,o),a(n,s),O(c,n,null),r=!0},p:t,i(t){r||(M(c.$$.fragment,t),r=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(S.has(t))return;S.add(t),A.c.push(()=>{S.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}(c.$$.fragment,t),r=!1},d(t){t&&u(n),T(c)}}}function R(t,e,n){let{name:o}=e;return t.$set=(t=>{"name"in t&&n("name",o=t.name)}),{name:o}}return new class extends L{constructor(t){super(),B(this,t,R,Q,r,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=cinemabox.js.map

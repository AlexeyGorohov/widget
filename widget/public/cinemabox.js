var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e,n){t.$$.on_destroy.push(function(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function i(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function h(t,e,n){t.classList[n?"add":"remove"](e)}let g;function m(t){g=t}const b=[],y=[],_=[],x=[],v=Promise.resolve();let k=!1;function w(t){_.push(t)}function E(){const t=new Set;do{for(;b.length;){const t=b.shift();m(t),S(t.$$)}for(;y.length;)y.pop()();for(let e=0;e<_.length;e+=1){const n=_[e];t.has(n)||(n(),t.add(n))}_.length=0}while(b.length);for(;x.length;)x.pop()();k=!1}function S(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(w))}const C=new Set;let M;function A(t,e){t&&t.i&&(C.delete(t),t.i(e))}function O(t,e){t.d(1),e.delete(t.key)}function j(t,n,r){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c.m(n,r),w(()=>{const n=i.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]}),a.forEach(w)}function L(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function N(t,e){t.$$.dirty||(b.push(t),k||(k=!0,v.then(E)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function B(e,s,r,c,i,u){const a=g;m(e);const l=s.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var p;d.ctx=r?r(e,l,(t,n,o=n)=>(d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),f&&N(e,t)),n)):l,d.update(),f=!0,o(d.before_update),d.fragment=c(d.ctx),s.target&&(s.hydrate?d.fragment.l((p=s.target,Array.from(p.childNodes))):d.fragment.c(),s.intro&&A(e.$$.fragment),j(e,s.target,s.anchor),E()),m(a)}class q{$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const D=[];function I(e,n=t){let o;const s=[];function c(t){if(r(e,t)&&(e=t,o)){const t=!D.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),D.push(n,e)}if(t){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(r,i=t){const u=[r,i];return s.push(u),1===s.length&&(o=n(c)||t),r(e),()=>{const t=s.indexOf(u);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}const P=I(0),T=[...Array(100).keys()].map(t=>({id:t,price:120,disabled:!1}));const z=function(){const{subscribe:t,update:e}=I(T);return{subscribe:t,toggleSeat:t=>{e(e=>(e[t].disabled=!e[t].disabled,e))}}}();function F(t,e,n){const o=Object.create(t);return o.seat=e[n],o}function G(t,e){var n,o,s,r,c,g=e.seat.id+"";function m(...t){return e.click_handler(e,...t)}return{key:t,first:null,c(){var t,i,u,a;n=l("div"),o=l("div"),s=d(g),r=f(),p(o,"class","seating__item p-2 w-100 text-center border border-succes rounded\n          cursor-pointer"),h(o,"disabled",e.seat.disabled),p(n,"class","seating__col p-1 d-flex"),i="click",u=m,(t=o).addEventListener(i,u,a),c=(()=>t.removeEventListener(i,u,a)),this.first=n},m(t,e){u(t,n,e),i(n,o),i(o,s),i(n,r)},p(t,n){e=n,t.$seating&&g!==(g=e.seat.id+"")&&$(s,g),t.$seating&&h(o,"disabled",e.seat.disabled)},d(t){t&&a(n),c()}}}function H(e){var n,o,s,r,c,h,g,m,b=[],y=new Map;let _=e.$seating;const x=t=>t.seat.id;for(let t=0;t<_.length;t+=1){let n=F(e,_,t),o=x(n);y.set(o,b[t]=G(o,n))}return{c(){n=l("div"),o=d("Цена: "),s=d(e.$sum),r=f(),(c=l("div")).textContent="Выбранные места:",h=f(),g=l("section"),m=l("div");for(let t=0;t<b.length;t+=1)b[t].c();p(n,"class","mb-2"),p(c,"class","mb-3"),p(m,"class","d-flex flex-wrap"),p(g,"class","section section_seating")},m(t,e){u(t,n,e),i(n,o),i(n,s),u(t,r,e),u(t,c,e),u(t,h,e),u(t,g,e),i(g,m);for(let t=0;t<b.length;t+=1)b[t].m(m,null)},p(t,e){t.$sum&&$(s,e.$sum);const n=e.$seating;b=function(t,e,n,o,s,r,c,i,u,a,l,d){let f=t.length,p=r.length,$=f;const h={};for(;$--;)h[t[$].key]=$;const g=[],m=new Map,b=new Map;for($=p;$--;){const t=d(s,r,$),i=n(t);let u=c.get(i);u?o&&u.p(e,t):(u=a(i,t)).c(),m.set(i,g[$]=u),i in h&&b.set(i,Math.abs($-h[i]))}const y=new Set,_=new Set;function x(t){A(t,1),t.m(i,l),c.set(t.key,t),l=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],o=e.key,s=n.key;e===n?(l=e.first,f--,p--):m.has(s)?!c.has(o)||y.has(o)?x(e):_.has(s)?f--:b.get(o)>b.get(s)?(_.add(o),x(e)):(y.add(s),f--):(u(n,c),f--)}for(;f--;){const e=t[f];m.has(e.key)||u(e,c)}for(;p;)x(g[p-1]);return g}(b,t,x,1,e,n,y,m,O,G,null,F)},i:t,o:t,d(t){t&&(a(n),a(r),a(c),a(h),a(g));for(let t=0;t<b.length;t+=1)b[t].d()}}}function J(t,e,n){let o,s;c(t,P,t=>{n("$sum",o=t)}),c(t,z,t=>{n("$seating",s=t)});return{$sum:o,$seating:s,click_handler:({seat:t},e)=>(function(t){const{id:e,disabled:n,price:o}=t;z.toggleSeat(e),P.update(t=>t+o)})(t)}}class K extends q{constructor(t){super(),B(this,t,J,H,r,[])}}function Q(e){var n,o,s,r,c=new K({});return{c(){n=l("main"),(o=l("h1")).textContent="Выберите место",s=f(),c.$$.fragment.c(),p(n,"class","p-2")},m(t,e){u(t,n,e),i(n,o),i(n,s),j(c,n,null),r=!0},p:t,i(t){r||(A(c.$$.fragment,t),r=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(C.has(t))return;C.add(t),M.c.push(()=>{C.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}(c.$$.fragment,t),r=!1},d(t){t&&a(n),L(c)}}}function R(t,e,n){let{name:o}=e;return t.$set=(t=>{"name"in t&&n("name",o=t.name)}),{name:o}}return new class extends q{constructor(t){super(),B(this,t,R,Q,r,["name"])}}({target:document.body,props:{CBID:void 0}})}();
//# sourceMappingURL=cinemabox.js.map
